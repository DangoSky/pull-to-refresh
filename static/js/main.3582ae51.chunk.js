(this["webpackJsonppull-to-refresh"]=this["webpackJsonppull-to-refresh"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/loading.6430e2b5.svg"},,,,function(e,t,a){e.exports=a.p+"static/media/drop-down.798164bc.svg"},function(e,t,a){e.exports=a.p+"static/media/complete.c47211e6.svg"},function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),l=a(6),i=a.n(l),c=a(10),u=a(1),h=a(2),f=a(4),d=a(3),p=a(5),m=(a(19),a(11)),v=a.n(m),g=a(7),E=a.n(g),T=a(12),S=a.n(T),y={init:"init",pullUpLoad:"pull-up-load",loading:"loading",pullToRefresh:"pull-to-refresh",loosenRefresh:"loosen-refresh",refreshing:"refreshing",refreshed:"refreshed"},R=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).divRef=r.a.createRef(),a.state={headerStatus:y.init,footerStatus:y.init,pullHeight:0},a.renderHeader=function(){var e=a.state.headerStatus,t=a.props,n=t.pullToRefreshText,o=void 0===n?"\u4e0b\u62c9\u5237\u65b0":n,s=t.loosenRefreshText,l=void 0===s?"\u677e\u5f00\u5237\u65b0":s,i=t.refreshingText,c=void 0===i?"\u6b63\u5728\u5237\u65b0":i,u=t.refreshedText,h=void 0===u?"\u5237\u65b0\u5b8c\u6210":u,f=r.a.createElement(r.a.Fragment,null,r.a.createElement("i",null),r.a.createElement("span",null,o)),d=r.a.createElement(r.a.Fragment,null,r.a.createElement("i",null),r.a.createElement("span",null,l)),p=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:E.a,alt:"",className:"icon-loading"}),r.a.createElement("span",null,c)),m=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:S.a,alt:""}),r.a.createElement("span",null,h));switch(e){case y.pullToRefresh:return f;case y.loosenRefresh:return d;case y.refreshing:return p;case y.refreshed:return m;default:return null}},a.renderFooter=function(){var e=a.props,t=e.hasMore,n=e.noMoreDataText,o=void 0===n?"\u65e0\u66f4\u591a\u6570\u636e":n,s=e.pullUpLoadHint,l=void 0===s?"\u4e0a\u62c9\u9875\u9762\u52a0\u8f7d\u66f4\u591a\u6570\u636e":s,i=e.loadingText,c=void 0===i?"\u6b63\u5728\u52a0\u8f7d":i,u=a.state.footerStatus,h=u===y.pullUpLoad?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:v.a,alt:""}),r.a.createElement("span",null,l)):u===y.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:E.a,alt:"",className:"icon-loading"}),r.a.createElement("span",null,c)):null;return t?h:r.a.createElement("p",null,o)},a.touchStart=function(e){if(a.canRefresh()){var n=e.currentTarget;t.initialTouch={clientY:e.touches[0].clientY,scrollTop:n.scrollTop}}},a.touchMove=function(e){if(a.canRefresh()){var n=a.props.distancePullToRefresh,r=void 0===n?60:n,o=e.touches[0].clientY-t.initialTouch.clientY,s=e.currentTarget.scrollTop;if(o>0&&s<=0){var l=o-t.initialTouch.scrollTop;l<0&&(l=0,t.initialTouch.scrollTop=o);var i=a.easing(l);a.setState({pullHeight:i,headerStatus:i>r?y.loosenRefresh:y.pullToRefresh})}}},a.touchEnd=function(){if(a.canRefresh()){var e=a.state.headerStatus,t=a.props.refreshFn;e===y.loosenRefresh?(a.setState({headerStatus:y.refreshing,pullHeight:0}),t&&t((function(){a.setState({headerStatus:y.refreshed},(function(){setTimeout((function(){a.setState({headerStatus:y.init})}),500)}))}))):a.setState({headerStatus:y.init,pullHeight:0})}},a.canRefresh=function(){var e=a.props.refreshFn,t=a.state.headerStatus;return e&&![y.refreshing,y.loading].includes(t)},a.scroll=function(e){var t=e.currentTarget,n=a.props,r=n.hasMore,o=n.loadFn,s=n.distancePullUpLoad,l=void 0===s?0:s,i=a.state.footerStatus;t&&r&&o&&i!==y.loading&&t.scrollHeight-l<=t.scrollTop+t.clientHeight&&(a.setState({footerStatus:y.loading}),o((function(){a.setState({footerStatus:y.pullUpLoad})})))},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.initData((function(){e.setState({footerStatus:y.pullUpLoad})}))}},{key:"easing",value:function(e){var t=window.screen.availHeight;return t/2.5*Math.sin(e/t*(Math.PI/2))}},{key:"render",value:function(){var e=this.state,t=e.pullHeight,a=e.headerStatus,n=e.footerStatus,o=this.props,s=o.hasMore,l=o.className,i=void 0===l?"":l,c=t?{transform:"translateY(".concat(t,"px)")}:void 0;return r.a.createElement("div",{className:"dangosky-pull-refresh-container status-".concat(a," ").concat(i),ref:this.divRef,onScroll:this.scroll,onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd},r.a.createElement("div",{className:"dangosky-header"},this.renderHeader()),r.a.createElement("div",{className:"dangosky-body",style:c},this.props.children),r.a.createElement("div",{className:"dangosky-footer footer-status-".concat(s?n:"no-more-data")},this.renderFooter()))}}]),t}(n.PureComponent);R.initialTouch={clientY:0,scrollTop:0};var b=R,M=(a(20),Array.from(Array(25)).map((function(e,t){return t+1}))),x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).fetchData=function(){return new Promise((function(e){setTimeout((function(){console.log(a.state.list),a.setState({list:a.state.list.concat(M)},(function(){console.log(a.state.list)})),e()}),3e3)}))},a.handleMore=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData();case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderList=function(){return a.state.list.map((function(e,t){return r.a.createElement("p",{key:t},e)}))},a.state={list:[]},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(b,{hasMore:!0,initData:this.handleMore,loadFn:this.handleMore,refreshFn:this.handleMore},r.a.createElement("div",{className:"content"},this.renderList())))}}]),t}(n.PureComponent);var F=function(){return r.a.createElement("div",null,r.a.createElement(x,null))};s.a.render(r.a.createElement(F,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.3582ae51.chunk.js.map